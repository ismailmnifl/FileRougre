<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Complete Responsive Hospital Website Design Tutorial</title>

		<!-- aos css file cdn link  -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
		/>

		<!-- bootstrap cdn link  -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css"
		/>

		<!-- font awesome cdn link  -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
		/>
		<!-- custom css file link  -->
		<link rel="stylesheet" href="doctorProfile.css" />
	</head>
	<body>
		<!-- header section starts  -->

		<header>
			<div class="container">
				<a href="index.html" class="logo"><img width="50px" src="images/DoctorCo.png" alt=""><span>D</span>octor<span>C</span>o.</a>

				<nav class="nav">
					<ul>
						<li><a href="#home">home</a></li>
						<li><a href="#about">about</a></li>
						<li><a href="#review">review</a></li>
						<li><a href="#contact">contact</a></li>
						<li><a href="#post">post</a></li>
						<li>
							<a href="#"
								><a href="login.html"
									><button class="button">Join</button></a
								></a
							>
						</li>
					</ul>
				</nav>

				<div class="fas fa-bars"></div>
			</div>
		</header>
		<!-- to keep the header away from the content -->
		<div class="spacer"></div>
		<!-- bage heading -->
		<div class="headerTitle">
			<h1 class="heading">
				<span>'</span> Doctor profile <span>'</span>
			</h1>
		</div>
		<!-- Doctor detail section start -->
		<section class="DoctorProfileSection">

            <div data-aos="fade-up" class="cardContainer">
				<div class="img-container">
						<img id="avatar" src="" alt="">
					</div>
					
					<div class="cardContent">
                        
                    <div class="info">
                        
                        <h3 id="lastname" style="color: #354046;"></h3>
                            
                        <div class="mb">
                            <span  class="colmnA">Speciality : </span>
                            <span id="speciality" class="colmn"></span>
                        </div>

                        <div class="mb">
                            <span class="colmnA">Location : </span>
                            <span id="location" class="colmn"></span>
                        </div>
                            
                            <div class="mb">
                                <span  class="colmnA">Adresse : </span>
                                <span id="addresse" class="colmn"></span>
                            </div>

                            <div class="mb">
                                <span  class="colmnA">Telephone : </span>
                                <span id="phone" class="colmn"></span>
                            </div>

                            <div class="mb">
                                <span  class="colmnA">Email : </span>
                                <span id="email" class="colmn"></span>
                            </div>

                            <div class="mb">
                                <h3 style="color: #354046;">Overall rating</h3>
                            </div>
    
                           
                                <p>User rating</p>
                                <div id="stars" class="stars">
                                    
                                </div>
                             
                            <p>
                                <p style="color: #354046;font-weight: 100;">4 based on 254 reviews.</p>
                            </p>
                    </div>

                    <div class="map">
                        <iframe id="maps" src=""></iframe>
                    </div>

				</div>
			</div>
        </section>
           <!-- Doctor detail section end -->

            <!-- review section start -->

        <section class="reviewSection">
            <div data-aos="fade-up" class="reviewCardContainer">
				<div class="addReview">
                    <div class="reviewStars">
                        <h5>Select how many stars : </h5>
                        <div class="starsGroup">
                        <img onclick="changeImg(1)" id="star-1" src="images/emptystar.png" alt="">
                        <img onclick="changeImg(2)" id="star-2" src="images/emptystar.png" alt="">
                        <img onclick="changeImg(3)" id="star-3" src="images/emptystar.png" alt="">
                        <img onclick="changeImg(4)" id="star-4" src="images/emptystar.png" alt="">
                        <img onclick="changeImg(5)" id="star-5" src="images/emptystar.png" alt="">
                    </div>
                    </div>
                    <textarea class="form-control" placeholder="Enter your review..." name="" id="reviewBody" cols="30" rows="3"></textarea>
                    <button class="buttonReverse">Send</button>
                </div>
			</div>
            <!-- user reviews  -->
            <div data-aos="fade-up" class="usersReviews">
                <div class="review">
                    <div class="box">
                        <h3>Ahmad salami</h3>
                        <div class="stars1">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/emptystar.png" alt="">
                        </div>
                    </div>
                    
                    <p class="desc">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                        Vel, a eaque laboriosam ducimus consequuntur voluptas
                        commodi? Nesciunt cumque tempore </p>
                        <p class="date">created at : 22/07/2021 17:32</p>
                </div>
                <hr>
                <div class="review">
                    <div class="box">
                        <h3>hamza seaferer</h3>
                        <div class="stars1">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/emptystar.png" alt="">
                        </div>
                    </div>
                    
                    <p class="desc">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                        Vel, a eaque laboriosam ducimus consequuntur voluptas
                        commodi? Nesciunt cumque tempore </p>
                        <p class="date">created at : 22/07/2021 17:32</p>
                </div>
                <hr>
                <div class="review">
                    <div class="box">
                        <h3>said mnifil</h3>
                        <div class="stars1">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/star.png" alt="">
                            <img src="images/emptystar.png" alt="">
                        </div>
                    </div>
                    
                    <p class="desc">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                        Vel, a eaque laboriosam ducimus consequuntur voluptas
                        commodi? Nesciunt cumque tempore </p>
                        <p class="date">created at : 22/07/2021 17:32</p>
                </div>
            </div>
            
        </section>
           <!-- review section end -->
		
   <!-- footer section start -->
		<section class="footer">
			<div class="container">
				<div class="row">
					<div class="col-md-4">
						<a href="#" class="logo"
							><img width="70px" src="images/DoctorCoFooter.png" alt=""><span>D</span>octor<span>C</span>o.</a
						>
						<p>
							Lorem ipsum, dolor sit amet consectetur adipisicing
							elit. Tenetur nemo porro quasi minima consequuntur
							dolorum, quas amet in autem id?
						</p>
					</div>

					<div class="col-md-4 text-center">
						<h3>links</h3>
						<a href="#">home</a>
						<a href="#">about</a>
						<a href="#">review</a>
						<a href="#">contact</a>
						<a href="#">post</a>
					</div>

					<div class="col-md-4 text-center">
						<h3>share</h3>
						<a href="#">facebook</a>
						<a href="#">twitter</a>
						<a href="#">instagram</a>
						<a href="#">github</a>
					</div>
				</div>
			</div>

			<h3 class="credit text-center mx-auto">
				created by <span>mr. ismail MNIFL</span> | all rights reserved.
			</h3>
		</section>

		<!-- footer section ends -->

		<!-- jquery cdn link  -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- aos js file cdn link  -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

		<!-- custom js link  -->
		<script src="js/main.js"></script>

		<script>
			AOS.init({
				duration: 1000,
				delay: 400,
			});
		</script>
        <script>

            var StarsCount = "";
            function changeImg(id) {

                for (let j = 1; j < 6; j++) {
                    var star = document.getElementById('star-'+j);
                star.src = 'images/emptystar.png';
                }
                
                for (let index = 1; index < id+1; index++) {

                var star = document.getElementById('star-'+index);
                star.src = 'images/star.png';
                    
                }
                console.log(id);
                StarsCount = id;
                console.log('stats'+StarsCount);
            }
            window.addEventListener('load',retreaveData);
            
            function retreaveData() {

                var myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");

                var raw = JSON.stringify({
                "doctorID": sessionStorage.getItem('doctorID')
                });

                var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
                };

                fetch("http://localhost/fileRouge/doctor/getSingleDoctorProfileData", requestOptions)
                .then(response => response.text())
                .then(function(result) {
                    console.log(result);
                    var data = JSON.parse(result);
                    console.log(data[0].avatar);
                    console.log(data[0].adresse);
                    document.getElementById('avatar').src = '../uploads/'+data[0].avatar;
                    document.getElementById('lastname').innerHTML ='Dr. '+ data[0].LastName ;
                    document.getElementById('speciality').innerHTML = data[0].speciality;
                    document.getElementById('location').innerHTML = data[0].location_id;
                    document.getElementById('addresse').innerHTML = data[0].adresse;
                    document.getElementById('phone').innerHTML = data[0].phone;
                    document.getElementById('email').innerHTML = data[0].email;
                    document.getElementById('maps').src = `https://maps.google.com/maps?q=${data[0].adresse}&output=embed`;

                    console.log('AVGstars : '+data[0].AVGstars);
                    var stars = "";

                    for (let index = 0; index < Math.round(data[0].AVGstars); index++) {
								stars += '<img src="images/star.png" alt="">';
								
							}
							for (let j = 0; j < 5-Math.round(data[0].AVGstars); j++) {
									
									stars += '<img src="images/emptystar.png" alt="">';
							}
                    console.log(stars);

                    document.getElementById('stars').innerHTML = stars;

                })
                .catch(error => console.log('error', error));
            }

            function insertReview() {
                var myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");

                var raw = JSON.stringify({
                "user_id": "50",
                "doctor_id": sessionStorage.getItem('doctorID'),
                "stars": StarsCount,
                "review": document.getElementById('reviewBody').value
                });

                var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
                };

                fetch("http://localhost/fileRouge/doctor/insertReview", requestOptions)
                .then(response => response.text())
                .then(result => console.log(result))
                .catch(error => console.log('error', error));
            }
          
        </script>
	</body>
</html>
